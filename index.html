<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="style.css">
	</head>
	<body >
		<div id="nav-bar"></div>
		<div id="about"></div>

		<div id="events">
			<!--
				todo: read in events (js onload) from txt files
			-->
			<div class="row">
				<div class="col-5">
					<div id="events-title">events</div>
					<div id="events-weekly">
						<div id="weekly-container">
							<div id="weekly-title">Weekly General<br>Sessions</div>
						</div>
						<div id="weekly-container">
							<div id="weekly-time">Tuesdays, 6pm</div>
						</div>
					</div>
				</div>

				<div class="col-7">
					<div id="events-socials"></div>
				</div>
			</div>
		</div>

		<div id="contact-us"></div>
		<div id="footer"></div>

		<script>
			function reqListener () {
				const items = this.responseText.split("\n");
				const socialBlock = document.getElementById("events-socials");

				for (var i = 0; i < items.length - 1; i++) {
					const item = items[i].split(" : ", 3);
					const card = document.createElement("div");
					const row = document.createElement("div");
					const card_title = document.createElement("div");
					const card_date = document.createElement("div");
					const card_desc = document.createElement("div");
					card.setAttribute("class", "card " + (new Date(item[1]).getTime() < new Date().getTime() ? "past" : "future"));
					row.setAttribute("class", "card-title-row");
					card_title.setAttribute("class", "card-title");
					card_date.setAttribute("class", "card-date");
					card_desc.setAttribute("class", "card-description");
					row.appendChild(card_title);
					row.appendChild(card_date);
					card.appendChild(row);
					card.appendChild(card_desc);
					card_title.innerHTML = item[0];
					card_date.innerHTML = item[1].substring(5);
					card_desc.innerHTML = item[2];

					socialBlock.appendChild(card);
				}
			}

			var oReq = new XMLHttpRequest();
			oReq.addEventListener("load", reqListener);
			oReq.open("GET", "https://raw.githubusercontent.com/QC-UCSD/QCSD_website/event-section-testing/events.txt");
			oReq.send();
		</script>
	</body>
</html>
